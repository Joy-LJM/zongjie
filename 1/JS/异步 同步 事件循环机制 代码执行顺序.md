### 同步异步代码执行顺序、事件循环、事件机制
- JS单线程设计初衷：
  - JS作用：是为了和浏览器页面产生交互，设计到DOM节点的增加删除更新；
  - 如果是多线程：一个线程新增节点，另一个线程删除节点，同时修改元素属性，同时渲染页面就有可能出现问题，也就是GUI渲染线程和JS引擎线程同时执行，那么最终的页面就可能不是我们想要的。
  - 因此，当JS引擎线程执行时，GUI渲染引擎线程会被挂起，等JS引擎线程空闲时再执行

- JS有同步代码和异步代码：{异步代码有定时器、数据请求等}；
  - 单线程=>任务阻塞：代码任务自上而下执行，当遇到异步代码，异步代码执行比较久，异步后面的同步代码只能等待，造成了阻塞，为了解决这个阻塞问题，JS引入了事件循环机制

- 事件循环机制：JS的代码执行是基于一种事件循环的机制
  - 1、所有任务都在主线程上执行，形成一个执行栈
  - 2、主线程之外，还存在一个任务队列。只要异步任务有了结果，就在任务队列之中放置一个事件
  - 3、 一旦执行栈中所有同步任务执行完毕，计算机就读取任务队列，里面的异步任务就结束等待，进入执行栈并开始执行
  - 执行完毕后执行栈再次为空，事件触发线程会重复上一步操作，继续从消息队列中取出一个任务。此机制被称为事件循环（event loop）机制

- 宏任务 微任务
  - 宏任务一般是：包括整体代码script，setTimeout，setInterval、I/O、UI render
  - 微任务主要是：Promise、promise的then catch就是微任务
  - 执行:先执行主线程里面的同步任务,在事件队列里,执行一个宏任务,结束后看有没有可以执行的微任务,有的话就执行里面的微任务,所有微任务执行完后就执行新的宏任务,

